<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- mapper 태그의 namespace 속성 필수 작성  -->  
<mapper namespace="localAdviceDAO">
	<!-- 키값으로 전체조회 -->
	<select id="getLocalAdviceList" parameterType="String" resultType="localadvice">
		SELECT * FROM LOCALADVICE 
		WHERE UPPER(L_SUBJECT) LIKE '%' || UPPER(#{key}) || '%' 
		ORDER BY M_ID
	</select>
	
	<!-- 키값에 해당하는 게시글수 조회 -->
	<select id="countLocalAdvice" parameterType="String" resultType="int">
		SELECT COUNT(L_SUBJECT) FROM LOCALADVICE WHERE UPPER(L_SUBJECT) LIKE '%' || UPPER(#{key}) || '%'
	</select>
	
	<!-- 게시글 입력 -->
	<insert id="insertLocalAdvice" parameterType="localadvice">
		INSERT INTO LOCALADVICE(L_IDX, M_ID, L_SUBJECT, L_CONTENT, L_DATE, L_UPVOTE, L_REVIEWCOUNT) 
		VALUES (LOCALADVICE_SEQ.NEXTVAL, #{m_id}, #{l_subject}, #{l_content}, SYSDATE, 0, 0)
	</insert>
	
</mapper>



















